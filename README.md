# Виджет jQuery.fc.tape

Виджет, эмулирующий поведение киноплёнки для анимаций. Анимируется фоновое изображение,
состоящее из кадров, склеенных в спрайт. Виджет позволяет задавать плавность, временные
характеристики, а также управлять поведением различными способами.


## Подключение

Для использования `jQuery.fc.tape` необходимы:

* [jQuery](http://jquery.com/) и
* [jQuery UI](http://jqueryui.com/) (Core и Widget)


## Вызов

```js
$('#element').tape(options);
```

## Опции

### gradually (boolean)

Переключать кадры с плавным наложением следующего на текущий (применимо при
малом количестве кадров, невысокой скорости переключения и для некоторых
эффектов).

    $('#tape').tape({
        gradually: false
    });
    
По умолчанию true.

### image (string)

Путь к изображению (спрайту с кадрами). Кадры должны располагаться один
под другим.

    $('#tape').tape({
        image: '/img/tape.png'
    });
    
По умолчанию используется фоновое изображение элемента.

### frameCount (integer)

Количество кадров, участвующих в анимации. Не обязательно должно быть равно
реальному количеству кадров в спрайте, но как минимум должно быть не больше.

    $('#tape').tape({
        frameCount: 12
    });
    
По умолчанию используется 0 (то есть анимация происходить не будет).

### frameHeight (integer / float)

Высота кадра. Иными словами, смещение спрайта при переходе к следующему кадру.

    $('#tape').tape({
        frameHeight: 250
    });
    
По умолчанию устанавливается равной высоте блока.

### frameChangeDuration (integer)

Продолжительность смены кадра в милисекундах . Если опция gradually выставлена
в true, то frameChangeDuration будет означать продолжительность перетекания
одного кадра в другой. В этом случае, если будет вызваны методы для перехода к
другом кадрам чаще, чем значение frameChangeDuration, перетекания всё равно
будут занимать устоновленное время, что может привести к некоторому
запаздыванию анимации.

    $('#tape').tape({
        frameChangeDuration: 30
    });
    
По умолчанию 50.

### backgroundX (integer)

Смещение спрайта с анимацией в изображении по оси x. Используется в случаях,
когда в одном спрайте содержится несколько анимаций. В этом случае все анимации
начинаются с верхнего края изображения, кадры идут сверху вниз, а смещение по
оси x задаёт нужный спрайт.

    $('#tape').tape({
        backgroundX: -150
    });
    
По умолчанию 0.

### preload (boolean)

Предзагрузка изображения со спрайтом и отображение анимаций только после этого
события. После загрузки возбуждается событие `tape-loaded` на элементе.

    $('#tape').tape({
        preload: false
    });
    
По умолчанию true.

## Опции через data-атрибуты

Опции можно задать через соответствующие data-атрибуты:

**Option**          | **Data attribute**         |
--------------------|----------------------------|
gradually           | data-gradually             |
image               | data-image                 |
frameCount          | data-frame-count           |
frameHeight         | data-frame-height          |
frameChangeDuration | data-frame-change-duration |
preload             | data-preload               |

## Методы

`windToNext` — прокрутка к следующему кадру;

`windToPrev` — прокрутка к предыдущему кадру;

`windTo` — перемещение к заданной позиции, минуя промежуточные кадры, параметры:

* `position` — позиция;
* `isRelative` — способ указания кадра относительно всей ленты (isRelative == true) и
целочисленный position для указания конкретного кадра;

`stepInTo` — прокрутка к заданной позиции путём поступательного перемещения по кадрам, параметры:

* `position` — позиция;
* `isRelative` — аналогично `windTo`;
* `callback` — обратный вызов после всех анимаций в рамках прокрутки;

`setPosition` — установка позиции без анимаций, параметры:

* `position` — позиция;

`setOptions` — изменение настроек «на лету», параметры:

* `options` — объект настроек.

`getOption` — получение значения настройки, параметры:

* `optionName` — название настройки.


### Поведения

`rotate` — перемещение плёнки назад-вперёд при помощи мыши. Используется для имитации вращения.
Принимает один параметр — объект с настройками:

* `element` — $-элемент, на котором будет активизировано управление мышью. По умолчанию — сама плёнка.
* `deltaX` — смещение курсора мыши, воспринимаемое как минимальный шаг для начала вращения.
Чем больше, тем медленнее вращается плёнка.
* `destroy` — true, усли нужно отвязать поведение от элемента.
* `direction` — направление движения плёнки при движении курсора мыши вправо: 1 для движения
вниз и -1 для движения вверх.

